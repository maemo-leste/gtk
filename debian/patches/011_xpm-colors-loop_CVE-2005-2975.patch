diff -Nurp gtk+-2.8.6/gdk-pixbuf/io-xpm.c gtk+-2.8.6.new/gdk-pixbuf/io-xpm.c
--- gtk+-2.8.6/gdk-pixbuf/io-xpm.c	2005-11-16 09:52:14.000000000 +0000
+++ gtk+-2.8.6.new/gdk-pixbuf/io-xpm.c	2005-11-16 09:58:23.000000000 +0000
@@ -405,7 +405,8 @@ file_buffer (enum buf_op op, gpointer ha
 		/* Fall through to the xpm_read_string. */
 
 	case op_body:
-		xpm_read_string (h->infile, &h->buffer, &h->buffer_size);
+		if(!xpm_read_string (h->infile, &h->buffer, &h->buffer_size))
+			return NULL;
 		return h->buffer;
 
 	default:
